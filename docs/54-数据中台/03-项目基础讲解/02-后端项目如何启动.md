---
slug: /dock-data-center/basics/backend-startup
---

# 后端项目如何启动

## 项目克隆
数据中台项目不再开源，采取闭源，放到了本人的私有仓库中，私有仓库地址：[https://gitcode.com/java_up](https://gitcode.com/java_up) 

然后来获取对应的 SSH 或者 HTTP 的地址。
![](/img/dock-data-center/项目启动讲解/克隆项目.png)
:::caution 注意
如果访问项目地址返回项目不存在或者 404，是因为没有权限。所以需要申请项目权限：
https://articles.zsxq.com/id_dbr2hgl0bx4d.html
:::

:::caution 克隆项目注意
要使用 HTTPS 或者 SSH 地址来执行 git clone 克隆项目，不要下载 ZIP，否则不会通过 git 关联到项目的远程仓库，不能够 git pull 更新项目
:::

## IntelliJ IDEA导入项目
知道了项目地址后，使用IntelliJ IDEA将项目导入

![](/img/dock-data-center/项目启动讲解/IDEA导入项目.png)

通过 IntelliJ IDEA将项目导入，**URL** 为项目的https或者ssh地址，**Directory** 为项目的目录，当项目克隆下来后，等待IntelliJ  IDEA通过maven将项目构建完毕

### 项目目录注意：
项目所在的目录中 **不要有中文！** 必须是全英文的，否则在服务启动时会出现class找不到的问题！

为了加快maven的构建速度，小伙伴可在自己电脑的maven中配置阿里云的镜像仓库
### 文件位置
```
apache-maven-3.6.3\conf\settings.xml
```
### 阿里云仓库配置
```xml
<mirrors>
	 <mirror>
      <id>aliyunmaven</id>
      <mirrorOf>*</mirrorOf>
      <name>阿里云公共仓库</name>
      <url>https://maven.aliyun.com/repository/public</url>
    </mirror>
</mirrors>
```
当项目构建完毕后，可在项目根目录下执行
```
mvn clean compile
```
编译一下项目是否有错误

## 安装需要的中间件
项目中依赖了Mysql、Redis、Zookeeper、kafka、的相关中间件，可参考下列文档本地搭建
[如何安装项目需要的中间件环境](/dock-data-center/basics/install)

## 导入数据库表和数据

### 导入相关数据
在项目根目录下，有sql文件夹，分为创建数据库、创建表和数据


### sql文件位置
<img src="/img/dock-data-center/项目启动讲解/sql文件位置.png" alt="表关系" width="30%" />

### 如何执行sql文件
1. 先执行 `create_database.sql` 创建好数据库
2. 再执行 `d_collect_data.sql` 和 `d_record.sql` 创建好表和数据，

:::caution 注意
如果直接执行sql文件报错的话，可以把sql文件中的语句粘贴到图形化工具的控制台中执行
:::

## 数据库账户和密码配置

项目中的数据库账户和密码都为`root`，所以大家在搭建自己的Mysql数据库时，注意一下密码的设置

如果想修改项目中连接数据库的账户和密码，需要在以下配置文件中进行修改

<img src="/img/dock-data-center/项目启动讲解/数据库配置.png" alt="表关系" width="35%" />


## 后端项目的服务启动
按照上述文档的说明进行项目和数据库以及中间件的环境都部署完后，就可以开始进行项目的启动了

## 业务服务启动
### 1. 先启动 `RecordApplication` 记录服务
<img src="/img/dock-data-center/项目启动讲解/Record服务.png" alt="表关系" width="35%" />

### 2. 再启动 `CollectDataApplication` 收集数据服务
<img src="/img/dock-data-center/项目启动讲解/CollectData服务.png" alt="表关系" width="35%" />

## 设置启动参数
项目中设计到中间件的地址都是用的 `127.0.0.1`，如果小伙伴在自己的云服务上搭建了中间件或者使用本人提供的云环境，需要借助设置启动参数的形式将127.0.0.1替换成 `真正的地址`
### 添加步骤(以记录服务为例)
选择对应的SpringBoot启动入口，先进行Run或者Debug启动一下

![](/img/dock-data-center/项目启动讲解/记录服务启动入口.png)


启动完后，idea的右上角就会有启动管理入口了

![](/img/dock-data-center/项目启动讲解/idea右上角的启动入口.png)

然后选择底部的 编辑配置 选项

![](/img/dock-data-center/项目启动讲解/idea右上角的启动编辑入口.png)


然后选择对应的服务启动入口，选择 修改选项 菜单

![](/img/dock-data-center/项目启动讲解/修改选项菜单.png)


然后选择 添加虚拟机 菜单

![](/img/dock-data-center/项目启动讲解/添加虚拟机菜单.png)

然后将具体的参数添加进去

![](/img/dock-data-center/项目启动讲解/具体的参数添加进去.png)

### 详细参数
```shell
-XX:MaxMetaspaceSize=256M
-Xmx256M
-Dspring.data.redis.host=${redis地址}
-Dspring.data.redis.password=${redis地址密码}
-Dspring.kafka.bootstrap-servers=${kafka地址}:9092
-Dprefix.distinction.name=my
```

:::caution 参数说明（非常重要！！！）
- `prefix.distinction.name` 的作用是为了多人使用云环境的中间件时，保持每个人的数据唯一，通过此配置在相应的中间件数据中加上前缀就可以实现唯一了， 比如Redis中的键名、Kafka的Topic、
- **注意：** 值一定要都小写！（例如mytest）
:::

## 启动错误
有的小伙伴在启动时，会出现如下图中的错误，只要按图中指示，选择 `Shorten the command line and rerun` 即可
<img src="/img/dock-data-center/项目启动讲解/启动错误.png" alt="表关系" width="40%" />